<% unless current_user == post.user %>

  
<% if current_user.favo?(post) %>

    
<%= form_for(current_user.favorites.find_by(micropost_id: post.id), html: { method: :delete }) do |f| %>

      
<%= hidden_field_tag :micropost_id, post.id %>

      
<%= f.submit 'お気に入りから削除', class: 'btn btn-danger btn-xs' %>

    
<% end %>

  
<% else %>

    
<%= form_for(current_user.favorites.build) do |f| %>

      
<%= hidden_field_tag :micropost_id, post.id %>

      
<%= f.submit 'お気に入りに追加', class: 'btn btn-primary btn-xs' %>

    
<% end %>

  
<% end %>

<% end %>
